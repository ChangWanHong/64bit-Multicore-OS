# 내 PC를 부팅하자

## 부팅과 부트로더
모든 OS들은 512바이트 크기의 작은 코드에서 시작한다.
512바이트의 작은 코드는 **부트로더(Boot loader)라고 불리며, OS의 나머지 코드를 메모리에 복사해 실행한다.

## 부팅과 BIOS
**부팅(Booting)**은 PC가 켜진 후에 OS가 실행되기 전까지 수행되는 일련의 작업과정을 의미한다.
부팅 과정에서 수행하는 작업에는 프로세서 초기화(멀티코어 관련 처리 포함), 메모리와 외부 디바이스 검사 및 초기화, 부트로더를 메모리에 복사하고 OS를 시작하는 과정 등이 포함된다.

![](https://github.com/HIPERCUBE/64bit-Multicore-OS/blob/master/book/img/Ch4_img1.jpg)

MINT64 OS의 부팅과정이다.
PC환경에서는 부팅 과정 중 하드웨어와 관련된 작업을 BIOS(Basic Input/Output System)가 담당하며, BIOS에서 수행하는 각종 테스트나 초기화를 POST(Power On Self Test)라고 부른다.

**BIOS**는 메인보드에 포함된 펨웨어(Firmware)의 일종으로, 이름 그대로 입출력을 담당하는 작은 프로그램이다.
보통 PC 메인보드에 롬(ROM)이나 플래시 메모리로 존재하며, 전원이 켜짐과 동시에 프로세서가 가장 먼저 실행하는 코드이다.
BIOS는 부팅 옵션 설정이나 시스템 전반적인 설정 값(Configuration)을 관리하는 역할도 겸하며, 설정값으로 시스템을 초기화하여 OS를 실행할 수 있는 환경을 만든다.
BIOS에서 제공하는 기능은 인터럽트를 통해 사용할 수 없으며, MS-DOS 같은 과거의 16비트 OS는 BIOS의 기능에 많이 의존했다.
MINT64 OS도 OS 이미지를 메모리에 복사하고 GUI 모드로 변환할 때 BIOS의 기능을 사용한다.

BIOS는 부팅 과정에서 시스템 초기화 외에 수많은 작업을 하지만, 그중에서 우리에게 가장 중요한 것은 부트로더 이미지를 메모리로 복사하는 단계이다.
부트로더는 **부트스트랩(Bootstrap) 코드**라고도 불리며 우리가 BIOS에서 처음으로 제어를 넘겨받는 부분이다.
부트로더는 플로피 디스크나 하드 디스크 등 저장 매체의 가장 앞부분에 존재한다.
PC는 디스크나 플래시 메모리 등 다양한 장치로 부팅할 수 있으므로 BIOS는 POST가 완료된 후 여러 장치를 검사하여 앞부분에 부트로더가 있는지 확인한다.
부트로더가 존재한다면 코드를 0x7C00 어드레스에 복사한 후 프로세서가 0x7C00 어드레스부터 코드를 수행하도록 한다.
부팅가능한 모든 장치를 검사했는데도 부트로더를 찾을 수 없다면 BIOS 'Operating System Not Found'와 같은 메시지를 출력하고 작업을 중단한다.

부트로더가 디스크에서 메모리로 복사되어 실행되었다는것은 BIOS에 의해 PC가 정상적으로 구동되었다는 것을 의미한다.
다시 말하면 우리가 만든 OS를 메모리에 올려서 실행할 준비가 된것이다.
